import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        CategoryConnect categoryManager = new CategoryConnect();
        CustomerConnect customerManager = new CustomerConnect();
        Scanner scanner = new Scanner(System.in);

        while (true) {
            System.out.println("\n=== Main Menu ===");
            System.out.println("1. Category Management");
            System.out.println("2. Customer Management");
            System.out.println("0. Exit");
            System.out.print("Choose an option: ");
            int mainChoice = scanner.nextInt();

            if (mainChoice == 1) {
                while (true) {
                    System.out.println("\n=== Category Menu ===");
                    System.out.println("1. Add Category");
                    System.out.println("2. Update Category");
                    System.out.println("3. Delete Category");
                    System.out.println("4. View Categories");
                    System.out.println("0. Back");
                    System.out.print("Choose an option: ");
                    int choice = scanner.nextInt();

                    try {
                        if (choice == 1) {
                            System.out.print("Category ID: ");
                            int id = scanner.nextInt();
                            System.out.print("Department ID: ");
                            int deptId = scanner.nextInt();
                            scanner.nextLine();
                            System.out.print("Category Name: ");
                            String name = scanner.nextLine();
                            categoryManager.addCategory(id, deptId, name);
                            System.out.println("Added successfully.");
                        } else if (choice == 2) {
                            System.out.print("Category ID to update: ");
                            int id = scanner.nextInt();
                            System.out.print("New Department ID: ");
                            int deptId = scanner.nextInt();
                            scanner.nextLine();
                            System.out.print("New Category Name: ");
                            String name = scanner.nextLine();
                            categoryManager.updateCategory(id, deptId, name);
                            System.out.println("Updated successfully.");
                        } else if (choice == 3) {
                            System.out.print("Category ID to delete: ");
                            int id = scanner.nextInt();
                            categoryManager.deleteCategory(id);
                            System.out.println("Deleted successfully.");
                        } else if (choice == 4) {
                            System.out.println("+------------+------------------------+----------------------+");
                            System.out.println("| CategoryID | CategoryDepartmentID   | CategoryName         |");
                            System.out.println("+------------+------------------------+----------------------+");
                            categoryManager.getCategoriesTable();
                            System.out.println("+------------+------------------------+----------------------+");
                        } else if (choice == 0) {
                            break;
                        } else {
                            System.out.println("Invalid option.");
                        }
                    } catch (Exception e) {
                        System.out.println("Error: " + e.getMessage());
                    }
                }
            } else if (mainChoice == 2) {
                while (true) {
                    System.out.println("\n=== Customer Menu ===");
                    System.out.println("1. Add Customer");
                    System.out.println("2. Update Customer");
                    System.out.println("3. Delete Customer");
                    System.out.println("4. View Customers");
                    System.out.println("0. Back");
                    System.out.print("Choose an option: ");
                    int choice = scanner.nextInt();

                    try {
                        if (choice == 1) {
                            System.out.print("Customer ID: ");
                            int id = scanner.nextInt();
                            scanner.nextLine();
                            System.out.print("First Name: ");
                            String fname = scanner.nextLine();
                            System.out.print("Last Name: ");
                            String lname = scanner.nextLine();
                            System.out.print("Email: ");
                            String email = scanner.nextLine();
                            System.out.print("Password: ");
                            String password = scanner.nextLine();
                            customerManager.addCustomer(id, fname, lname, email, password);
                            System.out.println("Added successfully.");
                        } else if (choice == 2) {
                            System.out.print("Customer ID to update: ");
                            int id = scanner.nextInt();
                            scanner.nextLine();
                            System.out.print("New First Name: ");
                            String fname = scanner.nextLine();
                            System.out.print("New Last Name: ");
                            String lname = scanner.nextLine();
                            System.out.print("New Email: ");
                            String email = scanner.nextLine();
                            System.out.print("New Password: ");
                            String password = scanner.nextLine();
                            customerManager.updateCustomer(id, fname, lname, email, password);
                            System.out.println("Updated successfully.");
                        } else if (choice == 3) {
                            System.out.print("Customer ID to delete: ");
                            int id = scanner.nextInt();
                            customerManager.deleteCustomer(id);
                            System.out.println("Deleted successfully.");
                        } else if (choice == 4) {
                            System.out.println("+------------+-----------------+-----------------+-------------------------+-----------------+");
                            System.out.println("| CustomerID | First Name      | Last Name       | Email                   | Password        |");
                            System.out.println("+------------+-----------------+-----------------+-------------------------+-----------------+");
                            customerManager.getCustomersTable();
                            System.out.println("+------------+-----------------+-----------------+-------------------------+-----------------+");
                        } else if (choice == 0) {
                            break;
                        } else {
                            System.out.println("Invalid option.");
                        }
                    } catch (Exception e) {
                        System.out.println("Error: " + e.getMessage());
                    }
                }
            } else if (mainChoice == 0) {
                System.out.println("Exiting...");
                break;
            } else {
                System.out.println("Invalid option.");
            }
        }
        scanner.close();
    }
}